<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>Scrolling 3D Scene â€” No VR</title>
<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
<style>
  html,body{margin:0;height:100%;overflow-y:scroll;background:#000}
  body::-webkit-scrollbar{display:none}
  .scroll-space{height:250vh}
  a-scene{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0}
  /* hide any VR/AR UI that might be injected */
  .a-enter-vr-button,.a-enter-vr,.a-enter-ar,.a-enter-ar-button,
  .a-enter-vr-modal,.a-enter-vr__icon{display:none!important;
    visibility:hidden!important;pointer-events:none!important;
    width:0!important;height:0!important;opacity:0!important;}
</style>
</head>
<body>
<div class="scroll-space"></div>

<a-scene
  embedded
  vr-mode-ui="enabled:false"
  renderer="colorManagement:true;physicallyCorrectLights:true"
  inspector="enabled:false">

  <!-- Lighting -->
  <a-entity light="type:ambient;intensity:0.8"></a-entity>
  <a-entity light="type:directional;color:#fff;intensity:1.2" position="2 4 3"></a-entity>

  <!-- Ground -->
  <a-plane rotation="-90 0 0" width="12" height="12" color="#111"></a-plane>

  <!-- Cube -->
  <a-box id="cube" position="0 1.25 -3" color="#4CC3D9" shadow="cast:true"></a-box>

  <!-- Camera -->
  <a-entity id="cameraRig" position="0 1.6 5">
    <a-camera look-controls="enabled:false" wasd-controls="enabled:false"></a-camera>
  </a-entity>
</a-scene>

<script>
(function(){
  const cube=document.querySelector('#cube');
  const camRig=document.querySelector('#cameraRig');
  const scrollSpace=document.querySelector('.scroll-space');

  // continuously watch for any injected VR UI and hide it
  const observer=new MutationObserver(()=>{
    document.querySelectorAll(
      '.a-enter-vr,.a-enter-vr-button,.a-enter-ar,.a-enter-ar-button'
    ).forEach(el=>el.style.display='none');
  });
  observer.observe(document.body,{childList:true,subtree:true});

  let lastScroll=window.scrollY;
  function animate(){
    const maxScroll=Math.max(1,scrollSpace.clientHeight-window.innerHeight);
    const scrollTop=Math.max(0,window.scrollY);
    const progress=Math.min(1,scrollTop/maxScroll);

    // camera motion
    const camZ=5-progress*5;
    const camY=1.6+Math.sin(progress*Math.PI)*0.5;
    camRig.setAttribute('position',`0 ${camY} ${camZ}`);

    // cube rotation
    const rotY=progress*360;
    const rotX=progress*180;
    cube.setAttribute('rotation',`${rotX} ${rotY} 0`);

    // smooth loop reset
    if(progress>=0.999 && scrollTop!==0){
      setTimeout(()=>window.scrollTo({top:0,behavior:'instant'}),50);
    }
    lastScroll=scrollTop;
    requestAnimationFrame(animate);
  }
  requestAnimationFrame(animate);
})();
</script>
</body>
</html>
